{"ast":null,"code":"var _jsxFileName = \"/Users/hsuan/mall-react/src/App.js\";\n// import React from \"react\";\n// import logo from \"./logo.svg\";\n// import MaterialTable from \"material-table\";\n// import \"./App.css\";\n// function App() {\n//   return (\n//     <div className=\"App\">\n//       <header className=\"App-header\">\n//         <img src={logo} className=\"App-logo\" alt=\"logo\" />\n//         <p>\n//           Edit <code>src/App.js</code> and save to reload.\n//         </p>\n//         <a\n//           className=\"App-link\"\n//           href=\"https://reactjs.org\"\n//           target=\"_blank\"\n//           rel=\"noopener noreferrer\"\n//         >\n//           Learn React\n//         </a>\n//       </header>\n//     </div>\n//   );\n// }\n// export default App;\nimport React, { Component } from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\"; // Import React Table\n\nimport ReactTable from \"react-table\";\nimport \"react-table/react-table.css\"; // Import Hamoni Sync\n\nimport Hamoni from \"hamoni-sync\";\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.handleChange = event => {\n      if (event.target.name === \"firstName\") this.setState({\n        firstName: event.target.value\n      });\n      if (event.target.name === \"lastName\") this.setState({\n        lastName: event.target.value\n      });\n    };\n\n    this.handleSubmit = event => {\n      this.listPrimitive.add({\n        firstName: this.state.firstName,\n        lastName: this.state.lastName\n      });\n      this.setState({\n        firstName: \"\",\n        lastName: \"\"\n      });\n      event.preventDefault();\n    };\n\n    this.renderEditable = cellInfo => {\n      return React.createElement(\"div\", {\n        style: {\n          backgroundColor: \"#fafafa\"\n        },\n        contentEditable: true,\n        suppressContentEditableWarning: true,\n        onBlur: e => {\n          let row = this.state.data[cellInfo.index];\n          row[cellInfo.column.id] = e.target.innerHTML;\n          this.listPrimitive.update(cellInfo.index, row);\n        },\n        dangerouslySetInnerHTML: {\n          __html: this.state.data[cellInfo.index][cellInfo.column.id]\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      });\n    };\n\n    this.state = {\n      data: [],\n      firstName: \"\",\n      lastName: \"\"\n    };\n  }\n\n  async componentDidMount() {\n    const accountId = \"YOUR_ACCOUNT_ID\";\n    const appId = \"YOUR_APP_ID\";\n    let hamoni;\n    const response = await fetch(\"https://api.sync.hamoni.tech/v1/token\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json; charset=utf-8\"\n      },\n      body: JSON.stringify({\n        accountId,\n        appId\n      })\n    });\n    const token = await response.json();\n    hamoni = new Hamoni(token);\n    hamoni.connect().then(() => {\n      hamoni.get(\"datagrid\").then(listPrimitive => {\n        this.listPrimitive = listPrimitive;\n        this.setState({\n          data: [...listPrimitive.getAll()]\n        });\n        listPrimitive.onItemAdded(item => {\n          this.setState({\n            data: [...this.state.data, item.value]\n          });\n        });\n        listPrimitive.onItemUpdated(item => {\n          let data = [...this.state.data.slice(0, item.index), item.value, ...this.state.data.slice(item.index + 1)];\n          this.setState({\n            data: data\n          });\n        });\n        listPrimitive.onSync(data => {\n          this.setState({\n            data: data\n          });\n        });\n      }).catch(error => console.log(error));\n    }).catch(error => console.log(error));\n  }\n\n  render() {\n    const data = this.state.data;\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      className: \"App-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: logo,\n      className: \"App-logo\",\n      alt: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      className: \"App-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Realtime React Datagrid\")), React.createElement(\"p\", {\n      className: \"App-intro\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Add new record\"), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"FirstName:\", React.createElement(\"input\", {\n      type: \"text\",\n      name: \"firstName\",\n      value: this.state.firstName,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    })), \" \", React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"LastName:\", React.createElement(\"input\", {\n      type: \"text\",\n      name: \"lastName\",\n      value: this.state.lastName,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    })), \"   \", React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Add\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(ReactTable, {\n      data: data,\n      columns: [{\n        Header: \"First Name\",\n        accessor: \"firstName\",\n        Cell: this.renderEditable\n      }, {\n        Header: \"Last Name\",\n        accessor: \"lastName\",\n        Cell: this.renderEditable\n      }, {\n        Header: \"Full Name\",\n        id: \"full\",\n        accessor: d => React.createElement(\"div\", {\n          dangerouslySetInnerHTML: {\n            __html: d.firstName + \" \" + d.lastName\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        })\n      }],\n      defaultPageSize: 10,\n      className: \"-striped -highlight\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/hsuan/mall-react/src/App.js"],"names":["React","Component","ReactTable","Hamoni","App","constructor","handleChange","event","target","name","setState","firstName","value","lastName","handleSubmit","listPrimitive","add","state","preventDefault","renderEditable","cellInfo","backgroundColor","e","row","data","index","column","id","innerHTML","update","__html","componentDidMount","accountId","appId","hamoni","response","fetch","method","headers","body","JSON","stringify","token","json","connect","then","get","getAll","onItemAdded","item","onItemUpdated","slice","onSync","catch","error","console","log","render","logo","Header","accessor","Cell","d"],"mappings":"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","sourcesContent":["// import React from \"react\";\n// import logo from \"./logo.svg\";\n// import MaterialTable from \"material-table\";\n// import \"./App.css\";\n\n// function App() {\n//   return (\n//     <div className=\"App\">\n//       <header className=\"App-header\">\n//         <img src={logo} className=\"App-logo\" alt=\"logo\" />\n//         <p>\n//           Edit <code>src/App.js</code> and save to reload.\n//         </p>\n//         <a\n//           className=\"App-link\"\n//           href=\"https://reactjs.org\"\n//           target=\"_blank\"\n//           rel=\"noopener noreferrer\"\n//         >\n//           Learn React\n//         </a>\n//       </header>\n//     </div>\n//   );\n// }\n\n// export default App;\n\nimport React, { Component } from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\n// Import React Table\nimport ReactTable from \"react-table\";\nimport \"react-table/react-table.css\";\n// Import Hamoni Sync\nimport Hamoni from \"hamoni-sync\";\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      data: [],\n      firstName: \"\",\n      lastName: \"\"\n    };\n  }\n\n  async componentDidMount() {\n    const accountId = \"YOUR_ACCOUNT_ID\";\n    const appId = \"YOUR_APP_ID\";\n    let hamoni;\n\n    const response = await fetch(\"https://api.sync.hamoni.tech/v1/token\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json; charset=utf-8\"\n      },\n      body: JSON.stringify({ accountId, appId })\n    });\n    const token = await response.json();\n    hamoni = new Hamoni(token);\n\n    hamoni\n      .connect()\n      .then(() => {\n        hamoni\n          .get(\"datagrid\")\n          .then(listPrimitive => {\n            this.listPrimitive = listPrimitive;\n\n            this.setState({\n              data: [...listPrimitive.getAll()]\n            });\n\n            listPrimitive.onItemAdded(item => {\n              this.setState({ data: [...this.state.data, item.value] });\n            });\n\n            listPrimitive.onItemUpdated(item => {\n              let data = [\n                ...this.state.data.slice(0, item.index),\n                item.value,\n                ...this.state.data.slice(item.index + 1)\n              ];\n\n              this.setState({ data: data });\n            });\n\n            listPrimitive.onSync(data => {\n              this.setState({ data: data });\n            });\n          })\n          .catch(error => console.log(error));\n      })\n      .catch(error => console.log(error));\n  }\n\n  handleChange = event => {\n    if (event.target.name === \"firstName\")\n      this.setState({ firstName: event.target.value });\n    if (event.target.name === \"lastName\")\n      this.setState({ lastName: event.target.value });\n  };\n\n  handleSubmit = event => {\n    this.listPrimitive.add({\n      firstName: this.state.firstName,\n      lastName: this.state.lastName\n    });\n    this.setState({ firstName: \"\", lastName: \"\" });\n    event.preventDefault();\n  };\n\n  renderEditable = cellInfo => {\n    return (\n      <div\n        style={{ backgroundColor: \"#fafafa\" }}\n        contentEditable\n        suppressContentEditableWarning\n        onBlur={e => {\n          let row = this.state.data[cellInfo.index];\n          row[cellInfo.column.id] = e.target.innerHTML;\n          this.listPrimitive.update(cellInfo.index, row);\n        }}\n        dangerouslySetInnerHTML={{\n          __html: this.state.data[cellInfo.index][cellInfo.column.id]\n        }}\n      />\n    );\n  };\n\n  render() {\n    const { data } = this.state;\n\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <h1 className=\"App-title\">Realtime React Datagrid</h1>\n        </header>\n        <p className=\"App-intro\">\n          <form onSubmit={this.handleSubmit}>\n            <h3>Add new record</h3>\n            <label>\n              FirstName:\n              <input\n                type=\"text\"\n                name=\"firstName\"\n                value={this.state.firstName}\n                onChange={this.handleChange}\n              />\n            </label>{\" \"}\n            <label>\n              LastName:\n              <input\n                type=\"text\"\n                name=\"lastName\"\n                value={this.state.lastName}\n                onChange={this.handleChange}\n              />\n            </label>\n            {\"   \"}\n            <input type=\"submit\" value=\"Add\" />\n          </form>\n        </p>\n        <div>\n          <ReactTable\n            data={data}\n            columns={[\n              {\n                Header: \"First Name\",\n                accessor: \"firstName\",\n                Cell: this.renderEditable\n              },\n              {\n                Header: \"Last Name\",\n                accessor: \"lastName\",\n                Cell: this.renderEditable\n              },\n              {\n                Header: \"Full Name\",\n                id: \"full\",\n                accessor: d => (\n                  <div\n                    dangerouslySetInnerHTML={{\n                      __html: d.firstName + \" \" + d.lastName\n                    }}\n                  />\n                )\n              }\n            ]}\n            defaultPageSize={10}\n            className=\"-striped -highlight\"\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}